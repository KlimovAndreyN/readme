Вопросы:
  2. нужен logout!
  3. /api/auth/register саму функциональнность добавления перенести в пользователя?
  4. /api/auth/:id перенести в пользователя /api/users/:id ?
  5. нужна смена пароля! /api/auth/change-password
  6. после регитсрации возвращаю - type: UserRdo, как при getById... где описано что отдать... только id или весь объект?
  7. задействовать настройки подключения к postgres из project/apps/blog/.env
    сейчас подключение из project/libs/blog/models/prisma/.env  ? или тут для работы prisma-cli и seed.ts ?
    после выполенения generate DATABASE_URL из project/libs/blog/models/prisma/.env закидывается значением по умолчанию, можно переопределить...
    POSTGRES_HOST и POSTGRES_PORT
    А может и сам prisma/.env слинковать с blog/.env?
  8. под windows не водит имя для миграции db:migrate, выполнил отдельно всю команду из нужного каталога
  9. заполенить данные в mongodb
  10. удалить BaseMemoryRepository если не будет использоватся?
  11. всем свойствам в Entity.populate нужно  "?? undefined;"
  12. возможно BlogTagModule, BlogTagService и BlogTagRepository вовсе не нужены, сразу в BlogPostReposipory обрабатывать теги
  13. сам добавил "entity.id = document.id; //! временно" в BaseMongoRepository, для created.user.rdo
  14. для Пользователя дополнительный запрос
        о количестве подписок на него и количестве его комментариев...
          возможно сделать поля в пользователе или считать, т.к. запрос отдельный
        возможно получение всех лайков пользователя/только своих
        возможно получение всех подписок пользователя/только своих
  15. для списка комментариев и нового комментария к посту нужно ли выводить детальную информацию о пользователе, пока оставил userId? а postId нужен?
  16. проверка существования поста по id, в комментариях и постах
        будет еще навешана проверка - валидатор?
        перед вставкой вызвать поиск? через BlogPostService или BlogPostRepository
          а что правильней использовать Service или Repository
        обработать try.... Foreign key constraint failed on the field: `comments_post_id_fkey (index)`
  17. будем валидировать postId? как для userId MongoIdValidationPipe, а для GUID?
          в комментариях и постах
          и наличии самого объекта как прошлом курсе - exist...
  18. у всех контоллеров/controller не прописано возвращаемое занчение? так и оставить?
  19. для поста с типом фото, как загружать картинку, после добавления или сразу?
        нужно позже убрать из проверок imagePath
  20. черновики других пользоватетлей доступны при запросе детальной информаций о посте?
        если пост сначала был опубликован и другой пользователь уже смотрел, а потом в черновики под автором и обновить страницу у пользователя
  21. .env
        нормальная проверка на файл .env
          [Account JWTConfig Validation Error]: "accessTokenSecret" is required  / accessTokenSecret: Joi.string().required(),
          !!!!  .required().message('1222222222222222222222222')
          !ошибка - Error: Cannot apply rules to empty ruleset or the last rule added does not support rule properties
        сделавть чтоб писал "не указан JWT_ACCESS_TOKEN_SECRET!"
          для всех параметров
        вынести/обеденить конфигурации в один модуль
  22. entity.id = undefined; //! пустая строка из базового класса и id не гененируется
        А в тегах вызывается конструктор с минимальным объектом и при вызове populate записывает в _id undefined
  23. при получении поста в теги отдавать только заголовки?
        добавил в rdo:
          @Transform(({ value }) => value.map((item: { title: string; }) => item.title))
  24. как определить ошибку вставки по из-за уникальности
        @@unique([postId, userId], name: "unique_postId_and_userId")
        в коде только '....Unique constraint failed on the (not available)....'
        с заданным зазванием, name: "unique_postId_and_userId" тоже не дополняет ошибку "target: null"
  25. сделать репост поста
        уникальность repostedPost != null и userId - Репост одной публикации можно сделать один раз.
        а редактировать репост нельзя? он же репост
  26. свои посты выбираются по своему пользователю? "?userId=...." или  /my_posts ?
  27. лайки
        проверить/добавить уникальность 1 лайк на 1 пост от 1го пользователя
        при добавлении лайка увеличить количество лайков поста, при удалении уменьшить
        возможно отобразить лайк у авторизированного пользователя, при получении списка постов и детализацию поста,
          а для не авторизированных заполнять false
  28. подписки
        проверить/добавить уникальность 1 подписка на 1 пост от 1го пользователя
        возможно отобразить подписку у авторизированного пользователя, при получении списка постов и детализацию поста,
          а для не авторизированных заполнять false
  29. при добавлении комментария увеличить количество комментариев поста, при удалении уменьшить
        если пост удален, а пользователь долго писал всой комментарий - будет ошибка базы данных
        если пост изменили и статус - черновик, коментировать можно, что то в ТЗ написано?
  30. в ТЗ не указана сортировка комментариев, видимо как добавлены, посомтреть как возвращает БД и если что добавить orderBy.createdAt = desc
  31. моя лента
  32. куда делся первый "@Inject(*.KEY)"?
  33. что такое FileSchema.virtul('id').get( ?  может сделать как BlogUserModel?
        отключил это пока, отрабатывает - entity.id = document.id;
        и при сохраннении даты пустые
  34. а как забрать через config module?
        @RabbitSubscribe({
          exchange: process.env[ConfigAlias.AppRabbitExchange], //! 'readme.notify', а как забрать через config module?
          routingKey: RabbitRouting.AddSubscriber,
          queue: process.env[ConfigAlias.AppRabbitQueue] //! 'readme.notify.income', а как забрать через config module?
        })
  35. двойной импорт модулей и в основном модуле и в подмодулях, а можно только в одном?
        BlogUserModule
        MailModule
  36. Entity и Service, dto, rdo, Ropositary, Factory


Заметки:
  1. как же выводить подтипы ....
    не сработало export type ReturnTypeToPOJOFunction<T extends StorableEntity<T>> = ReturnType<T['toPOJO']>;
    а как T['id']
  2. get-mongoose-options.ts - а как добраться
    из
      useFactory: async (config: ConfigService) => {
    к
      private readonly databaseConfig: ConfigType<typeof mongoDbConfig>
    чтобы заменить
      config.get<string>(ConfigAlias.MongoDbUsername)
    на
      databaseConfig.username
    ------
    config: ConfigType<typeof fileStorageConfig>
      можно по имени this.config.uploadDirectory
      а можно так сделать в сервисе при инициализации монгоДБ?
  3. а можно делать какие то алиасы или константы в project.json например для "cwd": "libs/blog/models/prisma"
  4. проверить в модулях
      - заменить " на '?
      - поискать <from ">
      - поискать <from '@> и переносом строки разделить и сгруппировать
      - поискать <from ".../dist/....>
      - еще <, }>
      - проверить неиспользуемые импорты
  5. Title: { description: 'The post title for types: video and text',
    все ограничения перечислены в PostFieldsByType
  6. есть одинаковые сообщения в разных бибилиотеках, возможно стоит сделать общие сообщения и описание, например "export const PostApiProperty = {"
      status: HttpStatus.UNAUTHORIZED,
      status: HttpStatus.BAD_REQUEST,
      NotFound: 'Post not found'
  7. в маркапах детальной информации поста есть:
       количество просмотров
       количество репостов, и видимо предусмотрен маршрут показать все репосты
  8. теги в маркапах начинаются с #
  9. как сделать базовый класс PageQuery и от него заменить BlogPostCommentQuery и на его основе сделать BlogPostQuery
  10. попробовать сделать дженерик для фабрики
  11. попробовать вынести конфиг для монгоДБ
  12. как в swagger добавить описание статического маршрута http://localhost:4200/static/1.txt

